# Migration `20201129150009-more-comments`

This migration has been generated by Brian at 11/29/2020, 9:00:09 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "ClientEvent" DROP CONSTRAINT "ClientEvent_reqUserById_fkey"

ALTER TABLE "ClientEvent" DROP COLUMN "reqUserById",
ADD COLUMN     "reqUserId" TEXT,
ADD COLUMN     "context" JSONB

ALTER TABLE "ClientEvent" ADD FOREIGN KEY("reqUserId")REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201129145416-added-comments..20201129150009-more-comments
--- datamodel.dml
+++ datamodel.dml
@@ -1,21 +1,28 @@
 // This file generated by schemaGen.sh
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
 }
 model ClientEvent {
   id            String   @default(cuid()) @id
   createdAt     DateTime @default(now())
+  // Ip address of the express req
   ip            String
-  reqUserById   String?
-  reqUser       User?    @relation(fields: [reqUserById], references: [id])
+  // The user id of the express req, if known
+  reqUserId     String?
+  // The user of the express req, if known
+  reqUser       User?    @relation(fields: [reqUserId], references: [id])
+  // The user agent of the request -- useful to know what type of device
   userAgent     String
+  // The name of the event
   name          String
+  // Event args/context
+  context       Json?
 }
 model User {
   id            String      @default(cuid()) @id
   createdAt     DateTime    @default(now())
```


