# Migration `20201129145416-added-comments`

This migration has been generated by Brian at 11/29/2020, 8:54:16 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Post" DROP COLUMN "blogId"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201124144129-init..20201129145416-added-comments
--- datamodel.dml
+++ datamodel.dml
@@ -1,38 +1,12 @@
+// This file generated by schemaGen.sh
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
-
 generator prisma_client {
   provider = "prisma-client-js"
 }
-
-model ApiError {
-  id            String   @default(cuid()) @id
-  createdAt     DateTime @default(now())
-
-  ip            String
-  reqUserId     String?
-  reqUser       User?    @relation(fields: [reqUserId], references: [id])
-  operationName String
-  message       String
-  stack         Json
-  reqBody       Json
-  resBody       Json
-}
-
-model ApiAccess {
-  id            String   @default(cuid()) @id
-  createdAt     DateTime @default(now())
-  ip            String
-
-  reqUserId     String?
-  reqUser       User?    @relation(fields: [reqUserId], references: [id])
-  operationName String
-  duration      Int
-}
-
 model ClientEvent {
   id            String   @default(cuid()) @id
   createdAt     DateTime @default(now())
@@ -41,39 +15,57 @@
   reqUser       User?    @relation(fields: [reqUserById], references: [id])
   userAgent     String
   name          String
 }
-
 model User {
-  id            String   @default(cuid()) @id
-  createdAt     DateTime @default(now())
+  id            String      @default(cuid()) @id
+  createdAt     DateTime    @default(now())
   createdById   String?
-  createdBy     User?    @relation("UsersCreatedByUser", fields: [createdById], references: [id])
-  usersCreated User[]   @relation("UsersCreatedByUser")
+  createdBy     User?       @relation("UsersCreatedByUser", fields: [createdById], references: [id])
+  usersCreated User[]       @relation("UsersCreatedByUser")
-  updatedAt     DateTime @updatedAt
+  updatedAt     DateTime    @updatedAt
   updatedById   String?
-  updatedBy     User?    @relation("UsersUpdatedByUser", fields: [updatedById], references: [id])
-  usersUpdated User[]   @relation("UsersUpdatedByUser")
+  updatedBy     User?       @relation("UsersUpdatedByUser", fields: [updatedById], references: [id])
+  usersUpdated User[]       @relation("UsersUpdatedByUser")
   name          String
   roles         UserRole[]
-  email         String @unique
+  email         String      @unique
   password      String?
-  postsAuthored Post[]   @relation("PostsAuthoredByUser")
-  postsCreated  Post[]   @relation("PostsCreatedByUser")
-  postsUpdated  Post[]   @relation("PostsUpdatedByUser")
+  postsAuthored Post[]      @relation("PostsAuthoredByUser")
+  postsCreated  Post[]      @relation("PostsCreatedByUser")
+  postsUpdated  Post[]      @relation("PostsUpdatedByUser")
   @@index([email])
 }
-
 enum UserRole {
   ADMIN
   EDITOR
   AUTHOR
 }
+model ApiError {
+  id            String   @default(cuid()) @id
+  createdAt     DateTime @default(now())
+  // Ip address of the express req
+  ip            String
+  // The user id of the express req, if known
+  reqUserId     String?
+  // The user of the express req, if known
+  reqUser       User?    @relation(fields: [reqUserId], references: [id])
+  // The GraphQL Operation that was called, if known
+  operationName String
+  // The error message
+  message       String
+  // A callstack if available
+  stack         Json
+  // The body of the express request
+  reqBody       Json
+  // The body of the express response
+  resBody       Json
+}
 model Post {
   id            String     @default(cuid()) @id
   createdAt     DateTime   @default(now())
   createdById   String?
@@ -83,23 +75,35 @@
   updatedBy     User?      @relation("PostsUpdatedByUser", fields: [updatedById], references: [id])
   title         String
   tags          Tag[]
-  blogId        Int?
   status        PostStatus
   authorId      String
   author        User       @relation("PostsAuthoredByUser", fields: [authorId], references: [id])
 }
-
 enum PostStatus {
   DRAFT
   PUBLISHED
 }
+model ApiAccess {
+  id            String   @default(cuid()) @id
+  createdAt     DateTime @default(now())
+  // Ip address of the express req
+  ip            String
+  // The user id of the express req, if known
+  reqUserId     String?
+  // The user of the express req, if known
+  reqUser       User?    @relation(fields: [reqUserId], references: [id])
+  // The GraphQL Operation that was called, if known
+  operationName String
+  // The amount of time passed to fulfill the request
+  duration      Int
+}
 model Tag {
-  id     Int    @default(autoincrement()) @id
+  id     Int         @default(autoincrement()) @id
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   value  String
   postId String?
-  post   Post?  @relation(fields: [postId], references: [id])
-}
+  post   Post?       @relation(fields: [postId], references: [id])
+}
```


